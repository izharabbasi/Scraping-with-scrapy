!function(e,t){"use strict";function s(){this.sendErrors=!1,this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.name="",this.onSuccess=!1,this.onError=!1,console.warn("Use of this module is deprecated as of v2.0.0. It will be removed entirely in v3.0.0")}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function n(t){e&&e.console&&"function"==typeof e.console.log&&console.log(t)}function i(t,s){if(t.sendErrors=s,!0===t.sendErrors){var o=e.onerror;e.onerror=function(s,n,i,r){s="message: "+s+", url: "+n+", line_num: "+i+", col_num: "+r,t.log({error:"BrowserJsException",exception:s}),o&&"function"==typeof o&&o.apply(e,arguments)}}}var r="sumologic.logger.session",a=r.length+1,u=[];s.prototype={reset:function(){u=[],this.endpoint="",this.interval=0,this.session="",this.timestamp="",this.hostName="",this.sourceCategory="",this.name=""},getCurrentLogs:function(){return u},setSession:function(e){e?(this.session=e,this.setCookie(this.session)):this.session||(this.session=this.getCookie(),this.session||(this.session=o(),this.setCookie(this.session)))},config:function(e){if(!e||"object"!=typeof e)return void n("Sumo Logic Logger requires you to set an endpoint.");if(!e.endpoint||""===e.endpoint)return void n("Sumo Logic Logger requires you to set an endpoint.");if(this.endpoint=e.endpoint,e.interval&&(this.interval=e.interval),this.setSession(e.sessionKey?e.sessionKey:o()),e.sendErrors&&i(this,e.sendErrors),e.sourceName&&(this.name=e.sourceName),e.sourceCategory&&(this.sourceCategory=e.sourceCategory),e.hostName&&(this.hostName=e.hostName),e.onSuccess&&(this.onSuccess=e.onSuccess),e.onError&&(this.onError=e.onError),this.interval>0){var t=this;setInterval(function(){t.sendLogs()},this.interval)}},log:function(t,s){if(""===this.endpoint)return void n("Sumo Logic Logger requires you to set an endpoint before pushing logs.");if(!t)return void n("Sumo Logic Logger requires that you pass a value to log.");s=s||!1;var o=t instanceof Array,i=o?t[0]:t,r=typeof i;if("undefined"===r||"string"===r&&""===i)return void n("Sumo Logic Logger requires that you pass a value to log.");if("object"===r&&0===Object.keys(t).length)return void n("Sumo Logic Logger requires that you pass a non-empty JSON object to log.");o||(t=[t]);var a=new Date;s&&(s.sessionKey&&this.setSession(s.sessionKey),s.timestamp&&(a=s.timestamp)),this.timestamp=a.toUTCString();var c=this,h=t.map(function(t){if("string"==typeof t)return JSON.stringify({msg:t,sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp});var s={sessionId:c.session,url:encodeURI(e.location),timestamp:c.timestamp};return Object.keys(t).forEach(function(e){s[e]=t[e]}),JSON.stringify(s)});u=u.concat(h),0===this.interval&&this.sendLogs()},logSent:function(){},sendLogs:function(){if(0!==u.length){var e;try{var t=new XMLHttpRequest;e=u,u=[];var s=this.onError;if(t.addEventListener("error",function(){u=e,s&&s()}),this.onSuccess){var o=this.onSuccess;t.addEventListener("load",function(){o()})}t.open("POST",this.endpoint+"?callback=logSent",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Sumo-Client","sumo-javascript-sdk"),""!==this.name&&t.setRequestHeader("X-Sumo-Name",this.name),""!==this.sourceCategory&&t.setRequestHeader("X-Sumo-Category",this.sourceCategory),""!==this.hostName&&t.setRequestHeader("X-Sumo-Host",this.hostName),t.send(e.join("\n"))}catch(t){u=e,this.onError&&this.onError()}}},flushLogs:function(){this.sendLogs()},emptyLogQueue:function(){u=[]},getCookie:function(){var e=t.cookie,s=e.indexOf(r);if(s<0)return!1;var o=e.indexOf(";",s+1);return o=o<0?e.length:o,e.slice(s+a,o)},setCookie:function(e){t.cookie=r+"="+e}};var c=e.SLLogger,h=new s;if(c&&c.length){var g=0,m=c.length;for(g=0;g<m;g++)h.log(c[g])}e.SLLogger=h,e.SumoLogger=s}(window,document);